<!DOCTYPE html>
<html>
<body>

<h2>FCL Vanilla</h2>



<div>
	<button onclick="getLatestBlock()" >Get Latest Block </button>
	<div id='blockResponse'></div>
</div>

<br/><br/>

<div>
	<input id='account' value='5555a83349295167' placeholder="Enter Flow address">
	<button onclick="getAccount()" >Lookup Account </button>
	<div id='getAccounResponse'></div>
</div>

<br/><br/>


<div>
	<textarea id='script'>
		pub fun main(): Int {
 			 return 42 + 6
		}
	</textarea>
	<button onclick="runScript()" >Run Script</button>
	<div id='runScriptResponse'></div>
</div>


<br/><br/>


<div>
	
	<button onclick="fcl.authenticate()" >Login</button>
	<button onclick="fcl.unauthenticate()" >Logout</button>

	<div id='loginResponse'></div>
</div>

<script src="sdk.js"></script>

<script>
fcl.config()
  .put("accessNode.api", "http://access.testnet.nodes.onflow.org:8000") // Configure FCL's Access Node
  .put("challenge.handshake", "https://flow-wallet-testnet.blocto.app/authn") 


fcl.currentUser().subscribe(user => showUser({...user}))

var showUser = function(user){
	console.log(user);
	
	    document.getElementById('loginResponse').innerText = JSON.stringify(user);
}
var getLatestBlock = async function() {
    const response = await fcl.send([
      fcl.getLatestBlock(),
    ]);
    var r  = await fcl.decode(response);
    document.getElementById('blockResponse').innerText = JSON.stringify(r);
}

var getAccount = async function() {
    const response = await fcl.send([
      fcl.getAccount(document.getElementById('account').value),
    ]);
    var r  = await fcl.decode(response);
    document.getElementById('getAccounResponse').innerText = JSON.stringify(r);
}

var runScript = async function() {
    const response = await fcl.send([
      fcl.script(document.getElementById('script').value),
    ]);
    var r  = await fcl.decode(response);
    document.getElementById('runScriptResponse').innerText = JSON.stringify(r);
}


</script>

</body>
</html> 